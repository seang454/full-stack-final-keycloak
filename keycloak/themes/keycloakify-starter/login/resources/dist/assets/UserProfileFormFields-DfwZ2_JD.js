import{r as w,j as p}from"./index-wzh7rEoK.js";import{a as h,i as A}from"./KcPage-D2b50LOC.js";import{u as R}from"./useIsPasswordRevealed-RSeT6v6h.js";Array.prototype.every||(Array.prototype.every=function(r,t){var n,e;if(this==null)throw new TypeError("this is null or not defined");var s=Object(this),l=s.length>>>0;if(typeof r!="function"&&Object.prototype.toString.call(r)!=="[object Function]")throw new TypeError;for(arguments.length>1&&(n=t),e=0;e<l;){var o;if(e in s){var d;if(o=s[e],n?d=r.call(n,o,e,s):d=r(o,e,s),!d)return!1}e++}return!0});const C=(r,t)=>{if(!r)return"";const n=t.match(/{\d+}/g);if(!n)return"";const e=n.reduce((a,i)=>a+parseInt(i.replace("{","").replace("}","")),0);let s=r.replace(/\D+/g,"");if(parseInt(s)!=s)return"";s.length>e&&(s=s.substring(0,e));const l=n.reduce((a,i)=>a+`(\\d${i})`,"^");let o=new RegExp(l).exec(s);if(!o)return r;let d=t;for(let a=0;a<n.length;a++)d=d.replace(n[a],o[a+1]);return d},B=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;let N;const E=new WeakSet,P="kcNumberUnFormat",$=`input[data-${P}]`;function q(){N==null||N();const r=n=>{if(E.has(n))return;const e=n.closest("form");e!==null&&(e.addEventListener("submit",()=>{const s=n.getAttribute(`data-${P}`);s&&(n.value=H(n.value,s))}),E.add(n))};document.querySelectorAll($).forEach(n=>{h(n instanceof HTMLInputElement),r(n)});const t=new MutationObserver(n=>{for(const e of n)e.type==="childList"&&e.addedNodes.length>0&&e.addedNodes.forEach(s=>{if(s.nodeType===Node.ELEMENT_NODE){const l=s.querySelector($);l!==null&&(h(l instanceof HTMLInputElement),r(l))}})});t.observe(document.body,{childList:!0,subtree:!0}),N=()=>t.disconnect()}const H=(r,t)=>{if(!r)return"";const n=t.match(/{\d+}/g);if(!n)return"";const e=n.reduce((a,i)=>a+parseInt(i.replace("{","").replace("}","")),0);let s=r.replace(/\D+/g,"");if(parseInt(s)!=s)return"";s.length>e&&(s=s.substring(0,e));const l=n.reduce((a,i)=>a+`(\\d${i})`,"^");let o=new RegExp(l).exec(s);if(!o)return r;let d=t;for(let a=0;a<n.length;a++)d=d.replace(n[a],o[a+1]);return d};function S(r){return!(r instanceof Object)||typeof r=="function"?r:r instanceof Array?r.map(S):Object.fromEntries(Object.entries(r).map(([t,n])=>[t,S(n)]))}var z=function(r,t){var n={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&t.indexOf(e)<0&&(n[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,e=Object.getOwnPropertySymbols(r);s<e.length;s++)t.indexOf(e[s])<0&&Object.prototype.propertyIsEnumerable.call(r,e[s])&&(n[e[s]]=r[e[s]]);return n};h();const V=new WeakMap;function W(r){const{kcContext:t}=r;e:{const e=V.get(t);if(e===void 0)break e;return e}const n=G(r);return V.set(t,n),n}function G(r){const{kcContext:t,doMakeUserConfirmPassword:n}=r;q();let e=K({kcContext:t});const s=new Set;return{dispatchFormAction:l=>{e=M({action:l,kcContext:t,doMakeUserConfirmPassword:n,state:e}),s.forEach(o=>o())},getFormState:()=>J({state:e}),subscribeToFormState:l=>(s.add(l),{unsubscribe:()=>{s.delete(l)}})}}function K(r){var t,n;const{kcContext:e}=r,{getErrors:s}=L({kcContext:e}),l=(()=>{var a;e:{if("profile"in e&&"attributesByName"in e.profile&&Object.keys(e.profile.attributesByName).length!==0)break e;if("register"in e&&e.register instanceof Object&&"formData"in e.register)return["firstName","lastName","email","username"].filter(i=>i!=="username"?!0:!e.realm.registrationEmailAsUsername).map(i=>{var c;return A({name:i,displayName:A(`\${${i}}`),required:!0,value:(c=e.register.formData[i])!==null&&c!==void 0?c:"",html5DataAnnotations:{},readOnly:!1,validators:{},annotations:{},autocomplete:(()=>{switch(i){case"email":return"email";case"username":return"username";default:return}})()})});if("user"in e&&e.user instanceof Object)return["username","email","firstName","lastName"].filter(i=>i!=="username"?!0:e.user.editUsernameAllowed).map(i=>{var c;return A({name:i,displayName:A(`\${${i}}`),required:!0,value:(c=e.user[i])!==null&&c!==void 0?c:"",html5DataAnnotations:{},readOnly:!1,validators:{},annotations:{},autocomplete:(()=>{switch(i){case"email":return"email";case"username":return"username";default:return}})()})});if("email"in e&&e.email instanceof Object)return[A({name:"email",displayName:A("${email}"),required:!0,value:(a=e.email.value)!==null&&a!==void 0?a:"",html5DataAnnotations:{},readOnly:!1,validators:{},annotations:{},autocomplete:"email"})];h(!1,"Unable to mock user profile from the current kcContext")}return Object.values(e.profile.attributesByName).map(S)})();e:{if(e.locale===void 0||l.find(a=>a.name==="locale")!==void 0)break e;l.push(A({validators:{},displayName:"locale",values:[],annotations:{},required:!1,html5DataAnnotations:{},multivalued:!1,readOnly:!1,name:"locale"}))}l.forEach(a=>{var i,c,u;a.name==="locale"&&(h(e.locale!==void 0),a.annotations.inputType="hidden",a.value=e.locale.currentLanguageTag,delete a.values);e:{if(typeof a.group!="string")break e;const{group:x,groupDisplayHeader:v,groupDisplayDescription:y,groupAnnotations:I}=a;if(delete a.group,delete a.groupDisplayHeader,delete a.groupDisplayDescription,delete a.groupAnnotations,x==="")break e;a.group={name:x,displayHeader:v,displayDescription:y,annotations:I,html5DataAnnotations:{}}}a.validators.options!==void 0&&a.annotations.inputType===void 0&&(a.annotations.inputType="select"),F({attribute:a})&&(a.multivalued=!0),a.multivalued?((i=a.values)!==null&&i!==void 0||(a.values=a.value!==void 0?[a.value]:[]),delete a.value):((c=a.value)!==null&&c!==void 0||(a.value=(u=a.values)===null||u===void 0?void 0:u[0]),delete a.values)});e:{if(!e.passwordRequired)break e;l.forEach((a,i)=>{a.name===(e.realm.registrationEmailAsUsername?"email":"username")&&l.splice(i+1,0,{name:"password",displayName:A("${password}"),required:!0,readOnly:!1,validators:{},annotations:{},autocomplete:"new-password",html5DataAnnotations:{}},{name:"password-confirm",displayName:A("${passwordConfirm}"),required:!0,readOnly:!1,validators:{},annotations:{},html5DataAnnotations:{},autocomplete:"new-password"})})}const o=[];for(const a of l){e:{if(!a.multivalued)break e;const i=!((t=a.values)===null||t===void 0)&&t.length?a.values:[""];n:{if(F({attribute:a}))break n;const c=a.validators.multivalued;if(c===void 0)break n;const{min:u}=c;if(!u)break n;const x=parseInt(`${u}`);for(let v=i.length;v<x;v++)i.push("")}o.push({attribute:a,valueOrValues:i});continue}o.push({attribute:a,valueOrValues:(n=a.value)!==null&&n!==void 0?n:""})}return{formFieldStates:o.map(({attribute:a,valueOrValues:i})=>({attribute:a,errors:s({attributeName:a.name,formFieldStates:o}),hasLostFocusAtLeastOnce:i instanceof Array&&!F({attribute:a})?i.map(()=>!1):!1,valueOrValues:i}))}}const Z=new WeakMap;function J(r){const{state:t}=r;e:{const n=Z.get(t);if(n===void 0)break e;return n}return{formFieldStates:t.formFieldStates.map(n=>{var{errors:e,hasLostFocusAtLeastOnce:s,attribute:l}=n,o=z(n,["errors","hasLostFocusAtLeastOnce","attribute"]);return Object.assign({displayableErrors:e.filter(d=>{const a=typeof s=="boolean"?s:d.fieldIndex!==void 0?s[d.fieldIndex]:s[s.length-1];switch(d.source.type){case"server":return!0;case"other":switch(d.source.rule){case"requiredField":return a;case"passwordConfirmMatchesPassword":return a}h(!1);case"passwordPolicy":switch(d.source.name){case"length":return a;case"maxLength":return a;case"digits":return a;case"lowerCase":return a;case"upperCase":return a;case"specialChars":return a;case"notUsername":return!0;case"notEmail":return!0}h(!1);case"validator":switch(d.source.name){case"length":return a;case"pattern":return a;case"email":return a;case"integer":return a;case"multivalued":return a;case"options":return a}h(!1)}}),attribute:l},o)}),isFormSubmittable:t.formFieldStates.every(({errors:n})=>n.length===0)}}function M(r){const{kcContext:t,doMakeUserConfirmPassword:n,action:e}=r;let{state:s}=r;const{getErrors:l}=L({kcContext:t}),o=s.formFieldStates.find(({attribute:d})=>d.name===e.name);return h(o!==void 0),(()=>{var d;switch(e.action){case"update":o.valueOrValues=e.valueOrValues;e:{const{attribute:a}=o,{kcNumberFormat:i}=(d=a.html5DataAnnotations)!==null&&d!==void 0?d:{};if(!i)break e;o.valueOrValues instanceof Array?o.valueOrValues=o.valueOrValues.map(c=>C(c,i)):o.valueOrValues=C(o.valueOrValues,i)}o.errors=l({attributeName:e.name,formFieldStates:s.formFieldStates});e:{const{displayErrorsImmediately:a=!1}=e;if(!a)break e;for(const i of e.valueOrValues instanceof Array?e.valueOrValues.map((...[,c])=>c):[void 0])s=M({state:s,kcContext:t,doMakeUserConfirmPassword:n,action:{action:"focus lost",name:e.name,fieldIndex:i}})}e:{if(n||e.name!=="password")break e;s=M({state:s,kcContext:t,doMakeUserConfirmPassword:n,action:{action:"update",name:"password-confirm",valueOrValues:e.valueOrValues,displayErrorsImmediately:e.displayErrorsImmediately}})}e:{if(!n||e.name!=="password")break e;s=M({state:s,kcContext:t,doMakeUserConfirmPassword:n,action:{action:"update",name:"password-confirm",valueOrValues:(()=>{const a=s.formFieldStates.find(({attribute:i})=>i.name==="password-confirm");return h(a!==void 0),a.valueOrValues})(),displayErrorsImmediately:e.displayErrorsImmediately}})}return;case"focus lost":if(o.hasLostFocusAtLeastOnce instanceof Array){const{fieldIndex:a}=e;h(a!==void 0),o.hasLostFocusAtLeastOnce[a]=!0;return}o.hasLostFocusAtLeastOnce=!0;return}h(!1)})(),Object.assign({},s)}function L(r){const{kcContext:t}=r,{messagesPerField:n,passwordPolicies:e}=t;function s(l){var o,d;const{attributeName:a,formFieldStates:i}=l,c=i.find(({attribute:f})=>f.name===a);h(c!==void 0);const{attribute:u}=c,x=(()=>{var f;let{valueOrValues:m}=c;e:{const{kcNumberUnFormat:g}=(f=u.html5DataAnnotations)!==null&&f!==void 0?f:{};if(!g)break e;m instanceof Array?m=m.map(b=>C(b,g)):m=C(m,g)}return m})();h(u!==void 0);e:{if(u.multivalued){const g=!((o=u.values)===null||o===void 0)&&o.length?u.values:[""];h(x instanceof Array);const b=x;if(JSON.stringify(g)!==JSON.stringify(b.slice(0,g.length)))break e}else{const g=(d=u.value)!==null&&d!==void 0?d:"";if(h(typeof x=="string"),g!==x)break e}let f;try{f=n.existsError(a)}catch{break e}if(!f)break e;return[{advancedMsgArgs:[n.get(a)],fieldIndex:void 0,source:{type:"server"}}]}e:{if(!u.multivalued||F({attribute:u}))break e;h(x instanceof Array);const f=x,m=f.map((...[,g])=>s({attributeName:a,formFieldStates:i.map(k=>k.attribute.name===a?(h(k.valueOrValues instanceof Array),{attribute:Object.assign(Object.assign({},u),{annotations:Object.assign(Object.assign({},u.annotations),{inputType:void 0}),multivalued:!1}),valueOrValues:k.valueOrValues[g]}):k)}).filter(k=>!(k.source.type==="other"&&k.source.rule==="requiredField")).map(k=>Object.assign(Object.assign({},k),{fieldIndex:g}))).reduce((g,b)=>[...g,...b],[]);n:{if(!u.required||f.every(g=>g!==""))break n;m.push({advancedMsgArgs:["error-user-attribute-required"],fieldIndex:void 0,source:{type:"other",rule:"requiredField"}})}return m}e:{if(!u.multivalued||!F({attribute:u}))break e;const f="multivalued",m=u.validators[f];if(m===void 0)return[];const{min:g}=m,b=g?parseInt(`${g}`):u.required?1:0;h(!isNaN(b));const{max:k}=m,O=k?parseInt(`${k}`):1/0;h(!isNaN(O)),h(x instanceof Array);const j=x;return b<=j.length&&j.length<=O?[]:[{advancedMsgArgs:["error-invalid-multivalued-size",`${b}`,`${O}`],fieldIndex:void 0,source:{type:"validator",name:f}}]}h(typeof x=="string");const v=x,y=[];e:{if(a!=="password"||e===void 0)break e;n:{const f="length",m=e[f];if(!m)break n;const g=m;if(v.length>=g)break n;y.push({advancedMsgArgs:["invalidPasswordMinLengthMessage",`${g}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:f}})}n:{const f="maxLength",m=e[f];if(!m)break n;const g=m;if(v.length<=g)break n;y.push({advancedMsgArgs:["invalidPasswordMaxLengthMessage",`${g}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:f}})}n:{const f="digits",m=e[f];if(!m)break n;const g=m;if(v.split("").filter(b=>!isNaN(parseInt(b))).length>=g)break n;y.push({advancedMsgArgs:["invalidPasswordMinDigitsMessage",`${g}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:f}})}n:{const f="lowerCase",m=e[f];if(!m)break n;const g=m;if(v.split("").filter(b=>b===b.toLowerCase()&&b!==b.toUpperCase()).length>=g)break n;y.push({advancedMsgArgs:["invalidPasswordMinLowerCaseCharsMessage",`${g}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:f}})}n:{const f="upperCase",m=e[f];if(!m)break n;const g=m;if(v.split("").filter(b=>b===b.toUpperCase()&&b!==b.toLowerCase()).length>=g)break n;y.push({advancedMsgArgs:["invalidPasswordMinUpperCaseCharsMessage",`${g}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:f}})}n:{const f="specialChars",m=e[f];if(!m)break n;const g=m;if(v.split("").filter(b=>!b.match(/[a-zA-Z0-9]/)).length>=g)break n;y.push({advancedMsgArgs:["invalidPasswordMinSpecialCharsMessage",`${g}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:f}})}n:{const f="notUsername";if(!e[f])break n;const g=i.find(k=>k.attribute.name==="username");if(!g)break n;const b=(()=>{var k;let{valueOrValues:O}=g;h(typeof O=="string");a:{const{kcNumberUnFormat:j}=(k=g.attribute.html5DataAnnotations)!==null&&k!==void 0?k:{};if(!j)break a;O=C(O,j)}return O})();if(b===""||v!==b)break n;y.push({advancedMsgArgs:["invalidPasswordNotUsernameMessage"],fieldIndex:void 0,source:{type:"passwordPolicy",name:f}})}n:{const f="notEmail";if(!e[f])break n;const g=i.find(b=>b.attribute.name==="email");if(!g)break n;h(typeof g.valueOrValues=="string");{const b=g.valueOrValues;if(b===""||v!==b)break n}y.push({advancedMsgArgs:["invalidPasswordNotEmailMessage"],fieldIndex:void 0,source:{type:"passwordPolicy",name:f}})}}e:{if(a!=="password-confirm")break e;const f=i.find(m=>m.attribute.name==="password");h(f!==void 0),h(typeof f.valueOrValues=="string");{const m=f.valueOrValues;if(v===m)break e}y.push({advancedMsgArgs:["invalidPasswordConfirmMessage"],fieldIndex:void 0,source:{type:"other",rule:"passwordConfirmMatchesPassword"}})}const{validators:I}=u;e:{if(!u.required||v!=="")break e;y.push({advancedMsgArgs:["error-user-attribute-required"],fieldIndex:void 0,source:{type:"other",rule:"requiredField"}})}e:{const f="length",m=I[f];if(!m)break e;const{"ignore.empty.value":g=!1,max:b,min:k}=m;if(g&&v==="")break e;const O={type:"validator",name:f};b&&v.length>parseInt(`${b}`)&&y.push({advancedMsgArgs:["error-invalid-length-too-long",`${b}`],fieldIndex:void 0,source:O}),k&&v.length<parseInt(`${k}`)&&y.push({advancedMsgArgs:["error-invalid-length-too-short",`${k}`],fieldIndex:void 0,source:O})}e:{const f="pattern",m=I[f];if(m===void 0)break e;const{"ignore.empty.value":g=!1,pattern:b,"error-message":k}=m;if(g&&v===""||new RegExp(b).test(v))break e;const O=[k??"shouldMatchPattern",b];y.push({advancedMsgArgs:O,fieldIndex:void 0,source:{type:"validator",name:f}})}e:{{const b=y[y.length-1];if(b!==void 0&&b.source.type==="validator"&&b.source.name==="pattern")break e}const f="email",m=I[f];if(m===void 0)break e;const{"ignore.empty.value":g=!1}=m;if(g&&v===""||B.test(v))break e;y.push({advancedMsgArgs:["invalidEmailMessage"],fieldIndex:void 0,source:{type:"validator",name:f}})}e:{const f="integer",m=I[f];if(m===void 0)break e;const{"ignore.empty.value":g=!1,max:b,min:k}=m;if(g&&v==="")break e;const O=parseInt(v),j={type:"validator",name:f};if(isNaN(O)){const U=["mustBeAnInteger"];y.push({advancedMsgArgs:U,fieldIndex:void 0,source:j});break e}if(b&&O>parseInt(`${b}`)){y.push({advancedMsgArgs:["error-number-out-of-range-too-big",`${b}`],fieldIndex:void 0,source:j});break e}if(k&&O<parseInt(`${k}`)){y.push({advancedMsgArgs:["error-number-out-of-range-too-small",`${k}`],fieldIndex:void 0,source:j});break e}}e:{const f="options",m=I[f];if(m===void 0||v===""||m.options.indexOf(v)>=0)break e;y.push({advancedMsgArgs:["notAValidOption"],fieldIndex:void 0,source:{type:"validator",name:f}})}return y}return{getErrors:s}}function F(r){var t,n;const{attribute:e}=r;return(n=(t=e.annotations.inputType)===null||t===void 0?void 0:t.startsWith("multiselect"))!==null&&n!==void 0?n:!1}function Q(r){const{attribute:t,values:n,fieldIndex:e}=r,s=(()=>{if(n.length===1)return!1;const o=(()=>{const{multivalued:d}=t.validators;if(d===void 0)return;const a=d.min;if(a!==void 0)return parseInt(`${a}`)})();return o===void 0?!0:n.length!==o})(),l=(()=>{if(e+1!==n.length)return!1;const o=(()=>{const{multivalued:d}=t.validators;if(d===void 0)return;const a=d.max;if(a!==void 0)return parseInt(`${a}`)})();return o===void 0?!0:n.length!==o})();return{hasRemove:s,hasAdd:l}}h();h();h();h();h();h();function X(r){const{doMakeUserConfirmPassword:t,i18n:n,kcContext:e}=r,s=W({kcContext:e,doMakeUserConfirmPassword:t}),[l,o]=w.useState(()=>s.getFormState());w.useEffect(()=>{const{unsubscribe:c}=s.subscribeToFormState(()=>{o(s.getFormState())});return()=>c()},[s]);const{advancedMsg:d,advancedMsgStr:a}=n;return{formState:w.useMemo(()=>({isFormSubmittable:l.isFormSubmittable,formFieldStates:l.formFieldStates.map(c=>({attribute:c.attribute,valueOrValues:c.valueOrValues,displayableErrors:c.displayableErrors.map((u,x)=>({errorMessage:p.jsx(w.Fragment,{children:d(...u.advancedMsgArgs)},`${c.attribute.name}-${x}`),errorMessageStr:a(...u.advancedMsgArgs),source:u.source,fieldIndex:u.fieldIndex}))}))}),[l]),dispatchFormAction:s.dispatchFormAction}}function ue(r){const{kcContext:t,i18n:n,kcClsx:e,onIsFormSubmittableValueChange:s,doMakeUserConfirmPassword:l,BeforeField:o,AfterField:d}=r,{advancedMsg:a}=n,{formState:{formFieldStates:i,isFormSubmittable:c},dispatchFormAction:u}=X({kcContext:t,i18n:n,doMakeUserConfirmPassword:l});w.useEffect(()=>{s(c)},[c]);const x={current:""};return p.jsx(p.Fragment,{children:i.map(({attribute:v,displayableErrors:y,valueOrValues:I})=>{var f;return p.jsxs(w.Fragment,{children:[p.jsx(Y,{attribute:v,groupNameRef:x,i18n:n,kcClsx:e}),o!==void 0&&p.jsx(o,{attribute:v,dispatchFormAction:u,displayableErrors:y,valueOrValues:I,kcClsx:e,i18n:n}),p.jsxs("div",Object.assign({className:e("kcFormGroupClass"),style:{display:v.annotations.inputType==="hidden"||v.name==="password-confirm"&&!l?"none":void 0}},{children:[p.jsxs("div",Object.assign({className:e("kcLabelWrapperClass")},{children:[p.jsx("label",Object.assign({htmlFor:v.name,className:e("kcLabelClass")},{children:a((f=v.displayName)!==null&&f!==void 0?f:"")})),v.required&&p.jsx(p.Fragment,{children:" *"})]})),p.jsxs("div",Object.assign({className:e("kcInputWrapperClass")},{children:[v.annotations.inputHelperTextBefore!==void 0&&p.jsx("div",Object.assign({className:e("kcInputHelperTextBeforeClass"),id:`form-help-text-before-${v.name}`,"aria-live":"polite"},{children:a(v.annotations.inputHelperTextBefore)})),p.jsx(ee,{attribute:v,valueOrValues:I,displayableErrors:y,dispatchFormAction:u,kcClsx:e,i18n:n}),p.jsx(D,{attribute:v,displayableErrors:y,kcClsx:e,fieldIndex:void 0}),v.annotations.inputHelperTextAfter!==void 0&&p.jsx("div",Object.assign({className:e("kcInputHelperTextAfterClass"),id:`form-help-text-after-${v.name}`,"aria-live":"polite"},{children:a(v.annotations.inputHelperTextAfter)})),d!==void 0&&p.jsx(d,{attribute:v,dispatchFormAction:u,displayableErrors:y,valueOrValues:I,kcClsx:e,i18n:n})]}))]}))]},v.name)})})}function Y(r){var t,n,e;const{attribute:s,groupNameRef:l,i18n:o,kcClsx:d}=r,{advancedMsg:a}=o;return((t=s.group)===null||t===void 0?void 0:t.name)!==l.current&&(l.current=(e=(n=s.group)===null||n===void 0?void 0:n.name)!==null&&e!==void 0?e:"",l.current!=="")?(h(s.group!==void 0),p.jsxs("div",Object.assign({className:d("kcFormGroupClass")},Object.fromEntries(Object.entries(s.group.html5DataAnnotations).map(([i,c])=>[`data-${i}`,c])),{children:[(()=>{var i;const c=(i=s.group.displayHeader)!==null&&i!==void 0?i:"",u=c!==""?a(c):s.group.name;return p.jsx("div",Object.assign({className:d("kcContentWrapperClass")},{children:p.jsx("label",Object.assign({id:`header-${s.group.name}`,className:d("kcFormGroupHeader")},{children:u}))}))})(),(()=>{var i;const c=(i=s.group.displayDescription)!==null&&i!==void 0?i:"";if(c!==""){const u=a(c);return p.jsx("div",Object.assign({className:d("kcLabelWrapperClass")},{children:p.jsx("label",Object.assign({id:`description-${s.group.name}`,className:d("kcLabelClass")},{children:u}))}))}return null})()]}))):null}function D(r){const{attribute:t,fieldIndex:n,kcClsx:e}=r,s=r.displayableErrors.filter(l=>l.fieldIndex===n);return s.length===0?null:p.jsx("span",Object.assign({id:`input-error-${t.name}${n===void 0?"":`-${n}`}`,className:e("kcInputErrorMessageClass"),"aria-live":"polite"},{children:s.filter(l=>l.fieldIndex===n).map(({errorMessage:l},o,d)=>p.jsxs(w.Fragment,{children:[l,d.length-1!==o&&p.jsx("br",{})]},o))}))}function ee(r){const{attribute:t,valueOrValues:n}=r;switch(t.annotations.inputType){case"hidden":return p.jsx("input",{type:"hidden",name:t.name,value:n});case"textarea":return p.jsx(se,Object.assign({},r));case"select":case"multiselect":return p.jsx(re,Object.assign({},r));case"select-radiobuttons":case"multiselect-checkboxes":return p.jsx(te,Object.assign({},r));default:{if(n instanceof Array)return p.jsx(p.Fragment,{children:n.map((...[,s])=>p.jsx(T,Object.assign({},r,{fieldIndex:s}),s))});const e=p.jsx(T,Object.assign({},r,{fieldIndex:void 0}));return t.name==="password"||t.name==="password-confirm"?p.jsx(ne,Object.assign({kcClsx:r.kcClsx,i18n:r.i18n,passwordInputId:t.name},{children:e})):e}}}function ne(r){const{kcClsx:t,i18n:n,passwordInputId:e,children:s}=r,{msgStr:l}=n,{isPasswordRevealed:o,toggleIsPasswordRevealed:d}=R({passwordInputId:e});return p.jsxs("div",Object.assign({className:t("kcInputGroup")},{children:[s,p.jsx("button",Object.assign({type:"button",className:t("kcFormPasswordVisibilityButtonClass"),"aria-label":l(o?"hidePassword":"showPassword"),"aria-controls":e,onClick:d},{children:p.jsx("i",{className:t(o?"kcFormPasswordVisibilityIconHide":"kcFormPasswordVisibilityIconShow"),"aria-hidden":!0})}))]}))}function T(r){var t;const{attribute:n,fieldIndex:e,kcClsx:s,dispatchFormAction:l,valueOrValues:o,i18n:d,displayableErrors:a}=r,{advancedMsgStr:i}=d;return p.jsxs(p.Fragment,{children:[p.jsx("input",Object.assign({type:(()=>{const{inputType:c}=n.annotations;return c!=null&&c.startsWith("html5-")?c.slice(6):c??"text"})(),id:n.name,name:n.name,value:e!==void 0?(h(o instanceof Array),o[e]):(h(typeof o=="string"),o),className:s("kcInputClass"),"aria-invalid":a.find(c=>c.fieldIndex===e)!==void 0,disabled:n.readOnly,autoComplete:n.autocomplete,placeholder:n.annotations.inputTypePlaceholder===void 0?void 0:i(n.annotations.inputTypePlaceholder),pattern:n.annotations.inputTypePattern,size:n.annotations.inputTypeSize===void 0?void 0:parseInt(`${n.annotations.inputTypeSize}`),maxLength:n.annotations.inputTypeMaxlength===void 0?void 0:parseInt(`${n.annotations.inputTypeMaxlength}`),minLength:n.annotations.inputTypeMinlength===void 0?void 0:parseInt(`${n.annotations.inputTypeMinlength}`),max:n.annotations.inputTypeMax,min:n.annotations.inputTypeMin,step:n.annotations.inputTypeStep},Object.fromEntries(Object.entries((t=n.html5DataAnnotations)!==null&&t!==void 0?t:{}).map(([c,u])=>[`data-${c}`,u])),{onChange:c=>l({action:"update",name:n.name,valueOrValues:e!==void 0?(h(o instanceof Array),o.map((u,x)=>x===e?c.target.value:u)):c.target.value}),onBlur:()=>l({action:"focus lost",name:n.name,fieldIndex:e})})),(()=>{if(e===void 0)return null;h(o instanceof Array);const c=o;return p.jsxs(p.Fragment,{children:[p.jsx(D,{attribute:n,kcClsx:s,displayableErrors:a,fieldIndex:e}),p.jsx(ae,{attribute:n,values:c,fieldIndex:e,dispatchFormAction:l,i18n:d})]})})()]})}function ae(r){const{attribute:t,values:n,fieldIndex:e,dispatchFormAction:s,i18n:l}=r,{msg:o}=l,{hasAdd:d,hasRemove:a}=Q({attribute:t,values:n,fieldIndex:e}),i=`-${t.name}-${e+1}`;return p.jsxs(p.Fragment,{children:[a&&p.jsxs(p.Fragment,{children:[p.jsx("button",Object.assign({id:`kc-remove${i}`,type:"button",className:"pf-c-button pf-m-inline pf-m-link",onClick:()=>s({action:"update",name:t.name,valueOrValues:n.filter((c,u)=>u!==e)})},{children:o("remove")})),d?p.jsx(p.Fragment,{children:" | "}):null]}),d&&p.jsx("button",Object.assign({id:`kc-add${i}`,type:"button",className:"pf-c-button pf-m-inline pf-m-link",onClick:()=>s({action:"update",name:t.name,valueOrValues:[...n,""]})},{children:o("addValue")}))]})}function te(r){const{attribute:t,dispatchFormAction:n,kcClsx:e,i18n:s,valueOrValues:l}=r,{classDiv:o,classInput:d,classLabel:a,inputType:i}=(()=>{const{inputType:u}=t.annotations;switch(h(u==="select-radiobuttons"||u==="multiselect-checkboxes"),u){case"select-radiobuttons":return{inputType:"radio",classDiv:e("kcInputClassRadio"),classInput:e("kcInputClassRadioInput"),classLabel:e("kcInputClassRadioLabel")};case"multiselect-checkboxes":return{inputType:"checkbox",classDiv:e("kcInputClassCheckbox"),classInput:e("kcInputClassCheckboxInput"),classLabel:e("kcInputClassCheckboxLabel")}}})(),c=(()=>{var u,x;e:{const{inputOptionsFromValidation:v}=t.annotations;if(v===void 0)break e;const y=t.validators[v];if(y===void 0||y.options===void 0)break e;return y.options}return(x=(u=t.validators.options)===null||u===void 0?void 0:u.options)!==null&&x!==void 0?x:[]})();return p.jsx(p.Fragment,{children:c.map(u=>p.jsxs("div",Object.assign({className:o},{children:[p.jsx("input",{type:i,id:`${t.name}-${u}`,name:t.name,value:u,className:d,"aria-invalid":r.displayableErrors.length!==0,disabled:t.readOnly,checked:l instanceof Array?l.includes(u):l===u,onChange:x=>n({action:"update",name:t.name,valueOrValues:(()=>{const v=x.target.checked;if(l instanceof Array){const y=[...l];return v?y.push(u):y.splice(y.indexOf(u),1),y}return x.target.checked?u:""})()}),onBlur:()=>n({action:"focus lost",name:t.name,fieldIndex:void 0})}),p.jsx("label",Object.assign({htmlFor:`${t.name}-${u}`,className:`${a}${t.readOnly?` ${e("kcInputClassRadioCheckboxLabelDisabled")}`:""}`},{children:_(s,t,u)}))]}),u))})}function se(r){const{attribute:t,dispatchFormAction:n,kcClsx:e,displayableErrors:s,valueOrValues:l}=r;h(typeof l=="string");const o=l;return p.jsx("textarea",{id:t.name,name:t.name,className:e("kcInputClass"),"aria-invalid":s.length!==0,disabled:t.readOnly,cols:t.annotations.inputTypeCols===void 0?void 0:parseInt(`${t.annotations.inputTypeCols}`),rows:t.annotations.inputTypeRows===void 0?void 0:parseInt(`${t.annotations.inputTypeRows}`),maxLength:t.annotations.inputTypeMaxlength===void 0?void 0:parseInt(`${t.annotations.inputTypeMaxlength}`),value:o,onChange:d=>n({action:"update",name:t.name,valueOrValues:d.target.value}),onBlur:()=>n({action:"focus lost",name:t.name,fieldIndex:void 0})})}function re(r){const{attribute:t,dispatchFormAction:n,kcClsx:e,displayableErrors:s,i18n:l,valueOrValues:o}=r,d=t.annotations.inputType==="multiselect";return p.jsxs("select",Object.assign({id:t.name,name:t.name,className:e("kcInputClass"),"aria-invalid":s.length!==0,disabled:t.readOnly,multiple:d,size:t.annotations.inputTypeSize===void 0?void 0:parseInt(`${t.annotations.inputTypeSize}`),value:o,onChange:a=>n({action:"update",name:t.name,valueOrValues:d?Array.from(a.target.selectedOptions).map(i=>i.value):a.target.value}),onBlur:()=>n({action:"focus lost",name:t.name,fieldIndex:void 0})},{children:[!d&&p.jsx("option",{value:""}),(()=>{var i,c;e:{const{inputOptionsFromValidation:u}=t.annotations;if(u===void 0)break e;h(typeof u=="string");const x=t.validators[u];if(x===void 0||x.options===void 0)break e;return x.options}return(c=(i=t.validators.options)===null||i===void 0?void 0:i.options)!==null&&c!==void 0?c:[]})().map(i=>p.jsx("option",Object.assign({value:i},{children:_(l,t,i)}),i))]}))}function _(r,t,n){var e;const{advancedMsg:s}=r;if(t.annotations.inputOptionLabels!==void 0){const{inputOptionLabels:l}=t.annotations;return s((e=l[n])!==null&&e!==void 0?e:n)}return t.annotations.inputOptionLabelsI18nPrefix!==void 0?s(`${t.annotations.inputOptionLabelsI18nPrefix}.${n}`):n}export{ue as default};
