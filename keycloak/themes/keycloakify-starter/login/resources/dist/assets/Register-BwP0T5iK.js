import{r as p,j as e}from"./index-DIhzf7wa.js";import{g as F,c as T,k as y}from"./KcPage-CcRVjnQI.js";function I(l){const{kcContext:c,i18n:s,doUseDefaultCss:t,Template:o,classes:i,UserProfileFormFields:r,doMakeUserConfirmPassword:d}=l,{kcClsx:a}=F({doUseDefaultCss:t,classes:i}),{messageHeader:u,url:g,messagesPerField:k,recaptchaRequired:j,recaptchaVisible:x,recaptchaSiteKey:b,recaptchaAction:n,termsAcceptanceRequired:h}=c,{msg:m,msgStr:f,advancedMsg:N}=s,[O,A]=p.useState(!1),[C,v]=p.useState(!1);return p.useLayoutEffect(()=>(window.onSubmitRecaptcha=()=>{document.getElementById("kc-register-form").requestSubmit()},()=>{delete window.onSubmitRecaptcha}),[]),e.jsx(o,Object.assign({kcContext:c,i18n:s,doUseDefaultCss:t,classes:i,headerNode:u!==void 0?N(u):m("registerTitle"),displayMessage:k.exists("global"),displayRequiredFields:!0},{children:e.jsxs("form",Object.assign({id:"kc-register-form",className:a("kcFormClass"),action:g.registrationAction,method:"post"},{children:[e.jsx(r,{kcContext:c,i18n:s,kcClsx:a,onIsFormSubmittableValueChange:A,doMakeUserConfirmPassword:d}),h&&e.jsx(B,{i18n:s,kcClsx:a,messagesPerField:k,areTermsAccepted:C,onAreTermsAcceptedValueChange:v}),j&&(x||n===void 0)&&e.jsx("div",Object.assign({className:"form-group"},{children:e.jsx("div",Object.assign({className:a("kcInputWrapperClass")},{children:e.jsx("div",{className:"g-recaptcha","data-size":"compact","data-sitekey":b,"data-action":n})}))})),e.jsxs("div",Object.assign({className:a("kcFormGroupClass")},{children:[e.jsx("div",Object.assign({id:"kc-form-options",className:a("kcFormOptionsClass")},{children:e.jsx("div",Object.assign({className:a("kcFormOptionsWrapperClass")},{children:e.jsx("span",{children:e.jsx("a",Object.assign({href:g.loginUrl},{children:m("backToLogin")}))})}))})),j&&!x&&n!==void 0?e.jsx("div",Object.assign({id:"kc-form-buttons",className:a("kcFormButtonsClass")},{children:e.jsx("button",Object.assign({className:T(a("kcButtonClass","kcButtonPrimaryClass","kcButtonBlockClass","kcButtonLargeClass"),"g-recaptcha"),"data-sitekey":b,"data-callback":"onSubmitRecaptcha","data-action":n,type:"submit"},{children:m("doRegister")}))})):e.jsx("div",Object.assign({id:"kc-form-buttons",className:a("kcFormButtonsClass")},{children:e.jsx("input",{disabled:!O||h&&!C,className:a("kcButtonClass","kcButtonPrimaryClass","kcButtonBlockClass","kcButtonLargeClass"),type:"submit",value:f("doRegister")})}))]}))]}))}))}function B(l){const{i18n:c,kcClsx:s,messagesPerField:t,areTermsAccepted:o,onAreTermsAcceptedValueChange:i}=l,{msg:r}=c;return e.jsxs(e.Fragment,{children:[e.jsx("div",Object.assign({className:"form-group"},{children:e.jsxs("div",Object.assign({className:s("kcInputWrapperClass")},{children:[r("termsTitle"),e.jsx("div",Object.assign({id:"kc-registration-terms-text"},{children:r("termsText")}))]}))})),e.jsxs("div",Object.assign({className:"form-group"},{children:[e.jsxs("div",Object.assign({className:s("kcLabelWrapperClass")},{children:[e.jsx("input",{type:"checkbox",id:"termsAccepted",name:"termsAccepted",className:s("kcCheckboxInputClass"),checked:o,onChange:d=>i(d.target.checked),"aria-invalid":t.existsError("termsAccepted")}),e.jsx("label",Object.assign({htmlFor:"termsAccepted",className:s("kcLabelClass")},{children:r("acceptTerms")}))]})),t.existsError("termsAccepted")&&e.jsx("div",Object.assign({className:s("kcLabelWrapperClass")},{children:e.jsx("span",{id:"input-error-terms-accepted",className:s("kcInputErrorMessageClass"),"aria-live":"polite",dangerouslySetInnerHTML:{__html:y(t.get("termsAccepted"))}})}))]}))]})}export{I as default};
